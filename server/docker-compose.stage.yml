# staging docker-compose that replaces or extends the base
# example commands: 
#   only db: docker-compose -f docker-compose.yml -f docker-compose.stage.yml up -d db
#   rebuild: docker-compose -f docker-compose.yml -f docker-compose.stage.yml up -d --build

version: '3.8'
services:
  api:
    environment: 
      MONGO_URI: 'mongodb://admin:password@mongo:27017/?authSource=admin' # hostname is the name of the container
  db:
    environment: 
      MONGO_INITDB_ROOT_USERNAME: 'admin'
      MONGO_INITDB_ROOT_PASSWORD: 'password'
    ports: 
      - '27017:27017' # ports are exposed during staging in case api is run outside of container network
